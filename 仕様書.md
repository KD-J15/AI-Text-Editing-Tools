# 文章校正AIツール ソースコード仕様書

## 概要
この仕様書は、文章校正AIツールのソースコード構成および主要な機能について記載しています。本ツールは、Flaskをバックエンドとして使用し、OpenAIのGPT-4oモデルを活用したWebアプリケーションです。

---

## ディレクトリ構成
```
├── .gitignore
├── README.md
├── app.py
├── requirements.txt
├── static
│   ├── css
│   │   └── styles.css
│   └── js
│       └── script.js
├── templates
│   └── index.html
└── 仕様書.md
```

---

## ファイル詳細

### 1. .gitignore
環境変数ファイルやキャッシュファイルなど、Gitで管理しないファイルを指定。
- `.env`: OpenAIのAPIキーを格納。
- `*.pyc`: Pythonのコンパイル済みバイナリファイル。

### 2. README.md
アプリケーションの概要、機能、使用技術、インストール手順、ファイル構成が記載されています。

### 3. app.py
Flaskアプリケーションのメインスクリプト。
#### 主な機能:
- **APIキーの読み込み**: `.env`ファイルからOpenAI APIキーを取得。
- **校正ロジック**: プリセットに応じた校正プロンプトを使用してOpenAI APIを呼び出し。
- **エラーハンドリング**: 校正対象の文字数制限や無効なプリセットに対する例外処理。

#### 主なエンドポイント:
- `/`: アプリのホームページを表示。
- `/proofread`: 校正結果を返すエンドポイント。POSTリクエストを受け取り、校正ロジックを実行。

### 4. requirements.txt
必要なPythonライブラリ:
- Flask
- openai
- python-dotenv

### 5. static/css/styles.css
アプリケーションのスタイルシート。以下の要素を含む:
- レスポンシブデザインの実装。
- 明確なセクション分けと柔軟なレイアウト。
- 各ボタンや入力欄のデザイン。

### 6. static/js/script.js
JavaScriptコード。
#### 主な機能:
- **送信相手選択**: サイドメニューからプリセットを選択し、入力欄に反映。
- **校正ボタンの処理**: 校正対象のテキストをサーバーに送信し、結果を取得して表示。
- **エラー処理**: 入力不足やサーバー接続エラー時のアラート表示。

### 7. templates/index.html
アプリケーションのメインHTMLテンプレート。
#### 主な構成:
- **フォーム**: 送信相手、校正対象のテキスト、校正結果表示エリア。
- **サイドメニュー**: プリセット選択用のリスト。
- **スクリプトの読み込み**: `styles.css`と`script.js`を利用。

---

## 校正ロジックの詳細
### 使用するプリセット
- `friend`: カジュアルな形式の校正。
- `relative`: 丁寧な形式の校正。
- `boss`: 礼儀正しい形式の校正。

### 実装の流れ
1. 入力文字列の長さチェック（最大1000文字）。
2. プリセットに基づくプロンプト生成。
3. OpenAI APIを使用して校正結果を取得。
4. 結果をJSON形式でフロントエンドに返却。

---

## 注意事項
- **環境変数**: `.env`ファイルにAPIキーを保存。
- **文字数制限**: 入力文字列は1000文字まで。
- **API依存性**: 校正結果の質はOpenAI GPTモデルに依存。
- **セキュリティ**: 入力内容は保存されず、プライバシーを保護。

---

## 改善提案
- **UI強化**: プレビュー機能や校正履歴の保存機能の追加。
- **エラーメッセージの多言語対応**: 日本語以外のエラーメッセージ表示への対応。
- **性能向上**: OpenAIの最新モデルへの対応。